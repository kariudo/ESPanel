<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ESPanel - Sensor Dashboard</title>
    
    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Materialize CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <style>
        .sensor-card {
            margin-bottom: 15px;
        }
        .card-title {
            font-size: 1.2rem !important;
        }
        .sensor-value {
            font-size: 1.5rem;
            font-weight: bold;
        }
        .wifi-form {
            margin-top: 20px;
        }
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        .status-online {
            background-color: #4CAF50;
        }
        .status-offline {
            background-color: #f44336;
        }
        .header-icon {
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <nav>
        <div class="nav-wrapper blue darken-2">
            <a href="#" class="brand-logo center">
                <i class="material-icons header-icon">dashboard</i>ESPanel
            </a>
        </div>
    </nav>

    <div class="container">
        <div class="section">
            <h4><i class="material-icons">visibility</i> Sensor Status</h4>
            
            <!-- Temperature Card -->
            <div class="row">
                <div class="col s12 m6">
                    <div class="card blue-grey darken-1 sensor-card">
                        <div class="card-content white-text">
                            <span class="card-title">
                                <i class="material-icons">thermostat</i> Temperature
                            </span>
                            <p>
                                <span class="status-indicator status-online"></span>
                                <span class="sensor-value" id="temperature">22.5°C</span>
                            </p>
                        </div>
                    </div>
                </div>
                
                <!-- Humidity Card -->
                <div class="col s12 m6">
                    <div class="card blue-grey darken-1 sensor-card">
                        <div class="card-content white-text">
                            <span class="card-title">
                                <i class="material-icons">water_drop</i> Humidity
                            </span>
                            <p>
                                <span class="status-indicator status-online"></span>
                                <span class="sensor-value" id="humidity">45%</span>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Additional Sensor Cards -->
            <div class="row">
                <div class="col s12 m6">
                    <div class="card blue-grey darken-1 sensor-card">
                        <div class="card-content white-text">
                            <span class="card-title">
                                <i class="material-icons">bolt</i> Pressure
                            </span>
                            <p>
                                <span class="status-indicator status-online"></span>
                                <span class="sensor-value" id="pressure">1013 hPa</span>
                            </p>
                        </div>
                    </div>
                </div>
                
                <div class="col s12 m6">
                    <div class="card blue-grey darken-1 sensor-card">
                        <div class="card-content white-text">
                            <span class="card-title">
                                <i class="material-icons">air</i> Air Quality
                            </span>
                            <p>
                                <span class="status-indicator status-online"></span>
                                <span class="sensor-value" id="airquality">Good</span>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- System Status Card -->
            <div class="row">
                <div class="col s12">
                    <div class="card green darken-1 sensor-card">
                        <div class="card-content white-text">
                            <span class="card-title">
                                <i class="material-icons">settings_system_daydream</i> System Status
                            </span>
                            <p>
                                <span class="status-indicator status-online"></span>
                                <span class="sensor-value">System Online</span>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- WiFi Credentials Form -->
        <div class="section">
            <h4><i class="material-icons">wifi</i> Update WiFi Credentials</h4>
            <div class="card-panel">
                <form id="wifiForm" class="wifi-form">
                    <div class="row">
                        <div class="input-field col s12">
                            <i class="material-icons prefix">network_wifi</i>
                            <input type="text" id="ssid" name="ssid" required>
                            <label for="ssid">Network Name (SSID)</label>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="input-field col s12">
                            <i class="material-icons prefix">lock</i>
                            <input type="password" id="password" name="password" required>
                            <label for="password">Password</label>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col s12">
                            <button class="btn waves-effect waves-light blue darken-2" type="submit">
                                Update WiFi Settings
                                <i class="material-icons right">send</i>
                            </button>
                            <button class="btn waves-effect waves-light grey" type="reset">
                                Clear
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        
        <!-- Status Message Area -->
        <div class="section">
            <div id="statusMessage" class="card-panel hide">
                <span id="statusText"></span>
            </div>
        </div>
    </div>

    <!-- Materialize JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script>
        // Sample data for demonstration - in a real implementation, this would come from your ESP device
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize Materialize components
            M.AutoInit();
            
            // Simulate updating sensor data (in real implementation, fetch from ESP)
            function updateSensorData() {
                // In a real implementation, you would fetch sensor data from your ESP device
                // For demo purposes, we'll just update with random values
                document.getElementById('temperature').textContent = (20 + Math.random() * 10).toFixed(1) + '°C';
                document.getElementById('humidity').textContent = (30 + Math.random() * 40).toFixed(0) + '%';
                document.getElementById('pressure').textContent = (1000 + Math.random() * 30).toFixed(0) + ' hPa';
                
                // Random air quality status
                const airQualityOptions = ['Excellent', 'Good', 'Fair', 'Poor'];
                const randomQuality = airQualityOptions[Math.floor(Math.random() * airQualityOptions.length)];
                document.getElementById('airquality').textContent = randomQuality;
            }
            
            // Update sensor data periodically
            setInterval(updateSensorData, 5000);
            
            // Handle WiFi form submission
            document.getElementById('wifiForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const ssid = document.getElementById('ssid').value;
                const password = document.getElementById('password').value;
                
                // Show loading state
                const submitBtn = this.querySelector('button[type="submit"]');
                const originalText = submitBtn.innerHTML;
                submitBtn.innerHTML = '<i class="material-icons">autorenew</i> Updating...';
                submitBtn.disabled = true;
                
                // In a real implementation, you would send this data to your ESP device
                // Example: fetch('/update_wifi', { method: 'POST', body: JSON.stringify({ssid, password}) })
                
                // Simulate API call delay
                setTimeout(() => {
                    // Show success message
                    const statusDiv = document.getElementById('statusMessage');
                    const statusText = document.getElementById('statusText');
                    
                    statusText.innerHTML = '<i class="material-icons">check_circle</i> WiFi credentials updated successfully! Device will reconnect shortly.';
                    statusDiv.className = 'card-panel green lighten-5 green-text';
                    statusDiv.classList.remove('hide');
                    
                    // Reset form
                    document.getElementById('wifiForm').reset();
                    
                    // Restore button
                    submitBtn.innerHTML = originalText;
                    submitBtn.disabled = false;
                    
                    // Hide message after 5 seconds
                    setTimeout(() => {
                        statusDiv.classList.add('hide');
                    }, 5000);
                    
                    console.log('WiFi credentials submitted:', {ssid, password});
                }, 1500);
            });
        });
    </script>
</body>
</html>